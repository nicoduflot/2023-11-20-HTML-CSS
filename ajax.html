<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formation HTML5 CSS3</title>
    <meta name="descritpion" content="Formation HTML5 CSS3 | Responsive Web Design" />
    <!-- Commentaire en HTML : ATTENTION ces commentaires sont visible par les visiteurs -->
    <!-- C'est dans l'entête où l'on va appeler les liens vers les fichiers de style ou de script javascript -->
    <style>
        .rouge-gras {
            font-weight: bold;
            color: darkred;
        }
    </style>
    <link rel="stylesheet" href="./css/style.css" media="screen" />
    <script src="./js/ajax.js"></script>
</head>

<body>
    <header>
        <div>
            <h1>Formation HTML5 CSS3</h1>
        </div>
    </header>
    <nav>
        <div>
            <ul>
                <li>
                    <a href="./index.html" title="Lien vers la page d'accueil">Accueil</a>
                </li>
                <li>
                    <a href="./cssgrid.html" title="Lien vers la page grille CS">Grilles CSS</a>
                </li>
                <li>
                    <a href="./bootstrap.html" title="Lien vers la page avec boostrap">Bootstrap</a>
                </li>
                <li>
                    <a href="./jsbases.html" title="Lien vers la page bases javascript">JS Bases</a>
                </li>
                <li>
                    <a href="./tableau.html" title="Lien vers les tableaux javascript">JS tableaux</a>
                </li>
                <li>
                    <a href="./fonction.html" title="Lien vers les fonctions javascript">JS Fonctions</a>
                </li>
                <li>
                    <a href="./dom.html" title="Lien vers la manipulation du DOM">JS DOM</a>
                </li>
                <li>
                    <a href="./dataset.html" title="Lien vers l'utilisation des dataset">JS Dataset</a>
                </li>
                <li>
                    <a href="./ajax.html" title="Lien vers ajax">JS Ajax</a>
                </li>
            </ul>
        </div>
    </nav>
    <main>
        <section>
            <article>
                <header>
                    <h2>AJAX : Asynchronous Javascript And Xml</h2>
                </header>
                <p>
                    Pour utiliser ajax avec js, sans regarder du côté des fonctions 
                    type fetch, il faut instancier une objet de type XmlHttpRequest (XHR). 
                    En code ça donnait
                </p>
                <textarea style="width: 100%;height: 400px;" disabled>var xhr = null;
// vérification du navigateur : supporte-t'il ajax
if(window.XMLHttpRequest || window.ActiveXObject){
    //le navigateur supporte ajax
    if(window.ActiveXObject){
        //navigateur microsoft type ie
        try{
            xhr = new ActiveXobject("Msxml2.XMLHTTP");
        }catch(e){
            xhr = new ActiveXobject("Microsoft.XMLHTTP");
        }
    }else{
        //pas IE
        xhr = new XmlHttpRequest();
    }
}else{
    //pas d'ajax
    alert("votre navigateur ne supporte pas l'objet XMLHttpRequest");
    return;
}</textarea>
                <p>
                    Cette fonction est étudiée pour prendre en compte les divers navigateurs et 
                    leurs compatibilité avec XHR
                </p>
            </article>
        </section>
        <section>
            <article>
                <header>
                    <h2>Fetch</h2>
                </header>
                <p>
                    fetch est la façon récente (2015) d'aller rechercher des flux de données sur une ressource exterieur.
                </p>
                <p>
                    <code>
                        fetch( 'adresse internet de la ressource' )<br />
                        .then( function(reponse){ <br/>
                        &nbsp;&nbsp;&nbsp;&nbsp;/* .then récupère le flux de données renvoyé par fetch */<br />
                        &nbsp;&nbsp;&nbsp;&nbsp;return reponse.json(); <br />
                        })<br />
                        .then( function(data){ <br />
                        &nbsp;&nbsp;&nbsp;&nbsp;/* ici, .then récupère dans la variable data le return du .then précédent*/<br />
                        &nbsp;&nbsp;&nbsp;&nbsp;/*code du traitement des données */<br />
                        })<br />
                        .catch( function(error){ <br />
                        &nbsp;&nbsp;&nbsp;&nbsp;/* si lefetch ou les then précédents osont en erreur, on la récupère ici dans la variable error*/<br />
                        &nbsp;&nbsp;&nbsp;&nbsp;/*code du traitement de l'erreur*/<br />
                        })<br />
                        .finally( function(){<br />
                        &nbsp;&nbsp;&nbsp;&nbsp;/* que le fetch ai réussi ou non, le code de .finally sera éxécuté */<br />
                        &nbsp;&nbsp;&nbsp;&nbsp;/* code a exécuter après la tentative réussie ou non de fetch*/<br />
                        });

                    </code>
                </p>
            </article>
        </section>
        <section>
            <article>
                <header>
                    <h2>Utiliser Fetch</h2>
                </header>
                <hr />
                <p>
                    <button data-type="json" data-url="./ressources/bdd.json">BDD</button>
                    <button data-type="json" data-url="./ressources/comments.json">Comments</button>
                    <button data-type="json" data-url="./ressources/posts.json">posts</button>
                    <button data-type="json" data-url="./ressources/users.json">users</button>
                    <button data-type="json" data-url="https://jsonplaceholder.typicode.com/todos">Todo sur jsonplaceholder</button>
                </p>
                <div id="resultats">

                </div>
            </article>
        </section>
    </main>
    <footer>
        <div>&copy; DAWAN - Novembre 2023</div>
        <div>
            <nav>
                <h3>Sitemap</h3>
                <ul>
                    <li>
                        <a href="./index.html" title="Lien vers la page d'accueil">Accueil</a>
                    </li>
                    <li>
                        <a href="./cssgrid.html" title="Lien vers la page grille CS">Grilles CSS</a>
                    </li>
                    <li>
                        <a href="./bootstrap.html" title="Lien vers la page avec boostrap">Bootstrap</a>
                    </li>
                    <li>
                        <a href="./jsbases.html" title="Lien vers la page bases javascript">JS Bases</a>
                    </li>
                    <li>
                        <a href="./tableau.html" title="Lien vers les tableaux javascript">JS tableaux</a>
                    </li>
                    <li>
                        <a href="./fonction.html" title="Lien vers les fonctions javascript">JS Fonctions</a>
                    </li>
                    <li>
                        <a href="./dom.html" title="Lien vers la manipulation du DOM">JS DOM</a>
                    </li>
                    <li>
                        <a href="./dataset.html" title="Lien vers l'utilisation des dataset">JS Dataset</a>
                    </li>
                    <li>
                        <a href="./ajax.html" title="Lien vers ajax">JS Ajax</a>
                    </li>
                </ul>
            </nav>
            <nav>
                <h3>Liens Institutionnels</h3>
                <ul>
                    <li>
                        <a href="#" title="Lien vers les conditions générales d'utilisation">CGU</a>
                    </li>
                    <li>
                        <a href="#" title="Notre équipe">Nous</a>
                    </li>
                    <li>
                        <a href="#" title="Liens vers la page nos partenaires">Partenariat</a>
                    </li>
                </ul>
            </nav>
        </div>
    </footer>
</body>
<script>
    console.log("fin du chargement de la page");
</script>

</html>